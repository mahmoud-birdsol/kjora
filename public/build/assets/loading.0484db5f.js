import{r as k,j as i,u as I,E as K,ab as V,V as j,O as R,N as Z,ac as b,w as q,q as G,b as F,v as Y,p as D,ad as H,ae as J,af as M,S as z,ag as A,ah as E,l as Q,ai as U}from"./app.8ff0f107.js";import{j as W,k as X,a as ee,l as te,e as ne,m as le,n as oe,o as se,p as ae,z as re,S as ue,r as C,g as p,q as S}from"./index.412eb292.js";import{e as ie}from"./base.1b1bd1ad.js";function ce(t,e,n){return t==null?t:W(t,e,n)}const h=t=>Object.keys(t),Ie=(t,e,n)=>({get value(){return X(t,e,n)},set value(l){ce(t,e,l)}}),O=Symbol(),_=k();function T(t,e=void 0){const n=V()?j(O,_):_;return t?i(()=>{var l,s;return(s=(l=n.value)==null?void 0:l[t])!=null?s:e}):n}function de(t,e){const n=T(),l=ee(t,i(()=>{var o;return((o=n.value)==null?void 0:o.namespace)||te})),s=ne(i(()=>{var o;return(o=n.value)==null?void 0:o.locale})),a=le(i(()=>{var o;return((o=n.value)==null?void 0:o.zIndex)||oe})),u=i(()=>{var o;return I(e)||((o=n.value)==null?void 0:o.size)||""});return ve(i(()=>I(n)||{})),{ns:l,locale:s,zIndex:a,size:u}}const ve=(t,e,n=!1)=>{var l;const s=!!V(),a=s?T():void 0,u=(l=e==null?void 0:e.provide)!=null?l:s?K:void 0;if(!u)return;const o=i(()=>{const v=I(t);return a!=null&&a.value?fe(a.value,v):v});return u(O,o),u(se,i(()=>o.value.locale)),u(ae,i(()=>o.value.namespace)),u(re,i(()=>o.value.zIndex)),u(ue,{size:i(()=>o.value.size||"")}),u(ie,i(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(n||!_.value)&&(_.value=o.value),o},fe=(t,e)=>{const n=[...new Set([...h(t),...h(e)])],l={};for(const s of n)l[s]=e[s]!==void 0?e[s]:t[s];return l};function me(t){let e;const n=k(!1),l=R({...t,originalPosition:"",originalOverflow:"",visible:!1});function s(r){l.text=r}function a(){const r=l.parent,c=m.ns;if(!r.vLoadingAddClassList){let d=r.getAttribute("loading-number");d=Number.parseInt(d)-1,d?r.setAttribute("loading-number",d.toString()):(C(r,c.bm("parent","relative")),r.removeAttribute("loading-number")),C(r,c.bm("parent","hidden"))}u(),g.unmount()}function u(){var r,c;(c=(r=m.$el)==null?void 0:r.parentNode)==null||c.removeChild(m.$el)}function o(){var r;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=setTimeout(v,400),l.visible=!1,(r=t.closed)==null||r.call(t))}function v(){if(!n.value)return;const r=l.parent;n.value=!1,r.vLoadingAddClassList=void 0,a()}const f=Z({name:"ElLoading",setup(r,{expose:c}){const{ns:d,zIndex:$}=de("loading");return c({ns:d,zIndex:$}),()=>{const L=l.spinner||l.svg,B=b("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",...L?{innerHTML:L}:{}},[b("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),P=l.text?b("p",{class:d.b("text")},[l.text]):void 0;return b(D,{name:d.b("fade"),onAfterLeave:v},{default:q(()=>[G(F("div",{style:{backgroundColor:l.background||""},class:[d.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[b("div",{class:d.b("spinner")},[B,P])]),[[Y,l.visible]])])})}}}),g=H(f),m=g.mount(document.createElement("div"));return{...J(l),setText:s,removeElLoadingChild:u,close:o,handleAfterLeave:v,vm:m,get $el(){return m.$el}}}let x;const ge=function(t={}){if(!M)return;const e=be(t);if(e.fullscreen&&x)return x;const n=me({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(x=void 0)}});pe(e,e.parent,n),w(e,e.parent,n),e.parent.vLoadingAddClassList=()=>w(e,e.parent,n);let l=e.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",e.parent.setAttribute("loading-number",l),e.parent.appendChild(n.$el),z(()=>n.visible.value=e.visible),e.fullscreen&&(x=n),n},be=t=>{var e,n,l,s;let a;return A(t.target)?a=(e=document.querySelector(t.target))!=null?e:document.body:a=t.target||document.body,{parent:a===document.body||t.body?document.body:a,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:a===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(l=t.lock)!=null?l:!1,customClass:t.customClass||"",visible:(s=t.visible)!=null?s:!0,beforeClose:t.beforeClose,closed:t.closed,target:a}},pe=async(t,e,n)=>{const{nextZIndex:l}=n.vm.zIndex||n.vm._.exposed.zIndex,s={};if(t.fullscreen)n.originalPosition.value=p(document.body,"position"),n.originalOverflow.value=p(document.body,"overflow"),s.zIndex=l();else if(t.parent===document.body){n.originalPosition.value=p(document.body,"position"),await z();for(const a of["top","left"]){const u=a==="top"?"scrollTop":"scrollLeft";s[a]=`${t.target.getBoundingClientRect()[a]+document.body[u]+document.documentElement[u]-Number.parseInt(p(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])s[a]=`${t.target.getBoundingClientRect()[a]}px`}else n.originalPosition.value=p(e,"position");for(const[a,u]of Object.entries(s))n.$el.style[a]=u},w=(t,e,n)=>{const l=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?C(e,l.bm("parent","relative")):S(e,l.bm("parent","relative")),t.fullscreen&&t.lock?S(e,l.bm("parent","hidden")):C(e,l.bm("parent","hidden"))},y=Symbol("ElLoading"),N=(t,e)=>{var n,l,s,a;const u=e.instance,o=r=>E(e.value)?e.value[r]:void 0,v=r=>{const c=A(r)&&(u==null?void 0:u[r])||r;return c&&k(c)},f=r=>v(o(r)||t.getAttribute(`element-loading-${U(r)}`)),g=(n=o("fullscreen"))!=null?n:e.modifiers.fullscreen,m={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:g,target:(l=o("target"))!=null?l:g?void 0:t,body:(s=o("body"))!=null?s:e.modifiers.body,lock:(a=o("lock"))!=null?a:e.modifiers.lock};t[y]={options:m,instance:ge(m)}},xe=(t,e)=>{for(const n of Object.keys(e))Q(e[n])&&(e[n].value=t[n])},ke={mounted(t,e){e.value&&N(t,e)},updated(t,e){const n=t[y];e.oldValue!==e.value&&(e.value&&!e.oldValue?N(t,e):e.value&&e.oldValue?E(e.value)&&xe(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[y])==null||e.instance.close(),t[y]=null}};export{Ie as g,T as u,ke as v};
