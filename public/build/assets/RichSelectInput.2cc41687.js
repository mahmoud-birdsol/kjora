import"./base.1b1bd1ad.js";import{v as R}from"./loading.0484db5f.js";/* empty css                        */import{a4 as j,S as L,r as b,z as q,h as P,o as h,d as y,a as f,n as w,e as N,t as U,b as O,u as S,c as K,J as W,w as J,q as F,a5 as X,F as Y,g as _,p as G,K as Q}from"./app.8ff0f107.js";import{u as Z,a as ee,f as te,s as ae,h as le}from"./floating-ui.vue.esm.b8000c53.js";import{t as ne}from"./error.7e8331f1.js";import{g as oe}from"./scroll.2986c3c8.js";import{d as se}from"./debounce.db0f0bcf.js";import{i as ie}from"./index.412eb292.js";import{r as re}from"./PlayIcon.11e5e915.js";import{r as ce}from"./CheckIcon.7c9aeea7.js";const A=e=>{let s=0,t=e;for(;t;)s+=t.offsetTop,t=t.offsetParent;return s},ue=(e,s)=>Math.abs(A(e)-A(s));var de="Expected a function";function B(e,s,t){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(de);return ie(t)&&(n="leading"in t?!!t.leading:n,a="trailing"in t?!!t.trailing:a),se(e,s,{leading:n,maxWait:s,trailing:a})}const c="ElInfiniteScroll",fe=50,me=200,ve=0,ge={delay:{type:Number,default:me},distance:{type:Number,default:ve},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},H=(e,s)=>Object.entries(ge).reduce((t,[n,a])=>{var r,l;const{type:p,default:m}=a,i=e.getAttribute(`infinite-scroll-${n}`);let u=(l=(r=s[i])!=null?r:i)!=null?l:m;return u=u==="false"?!1:u,u=p(u),t[n]=Number.isNaN(u)?m:u,t},{}),M=e=>{const{observer:s}=e[c];s&&(s.disconnect(),delete e[c].observer)},pe=(e,s)=>{const{container:t,containerEl:n,instance:a,observer:r,lastScrollTop:l}=e[c],{disabled:p,distance:m}=H(e,a),{clientHeight:i,scrollHeight:u,scrollTop:v}=n,E=v-l;if(e[c].lastScrollTop=v,r||p||E<0)return;let x=!1;if(t===e)x=u-(i+v)<=m;else{const{clientTop:k,scrollHeight:T}=e,C=ue(e,n);x=v+i>=C+k+T-m}x&&s.call(a)};function D(e,s){const{containerEl:t,instance:n}=e[c],{disabled:a}=H(e,n);a||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?s.call(n):M(e))}const be={async mounted(e,s){const{instance:t,value:n}=s;j(n)||ne(c,"'v-infinite-scroll' binding value must be a function"),await L();const{delay:a,immediate:r}=H(e,t),l=oe(e,!0),p=l===window?document.documentElement:l,m=B(pe.bind(null,e,n),a);if(!!l){if(e[c]={instance:t,container:l,containerEl:p,delay:a,cb:n,onScroll:m,lastScrollTop:p.scrollTop},r){const i=new MutationObserver(B(D.bind(null,e,n),fe));e[c].observer=i,i.observe(e,{childList:!0,subtree:!0}),D(e,n)}l.addEventListener("scroll",m)}},unmounted(e){if(!e[c])return;const{container:s,onScroll:t}=e[c];s==null||s.removeEventListener("scroll",t),M(e)},async updated(e){if(!e[c])await L();else{const{containerEl:s,cb:t,observer:n}=e[c];s.clientHeight&&n&&D(e,t)}}},$=be;$.install=e=>{e.directive("InfiniteScroll",$)};const he=$,ye={class:"mt-1"},xe={key:0,class:"flex items-center"},Ne=["src"],we={class:"block truncate mis-3"},ke={class:"absolute inset-y-0 flex items-center pr-2 pointer-events-none mie-3 ltr:right-0 rtl:left-0"},Se={key:0,"infinite-scroll-distance":"5",tabindex:"-1",role:"listbox","aria-labelledby":"listbox-label","aria-activedescendant":"listbox-option-3"},Ee={class:"flex p-4"},Te=["onClick"],Ce={class:"flex items-center"},Ve=["src"],Re={__name:"RichSelectInput",props:{modelValue:[String,Number],valueName:String,textName:String,imageName:String,options:{required:!1,type:Array,default:[]},source:{required:!1,type:String,default:""},append:{required:!1,type:Object},bgColor:{default:"white"},txtColor:{default:"black"}},emits:["update:modelValue","selected"],setup(e,{emit:s}){const t=e,n=b(null),a=b([]);q(()=>{t.options.length&&(a.value=t.options,t.modelValue?l.value=t.options.filter(o=>o[t.valueName]==t.modelValue)[0]:l.value="")}),P(()=>{t.options.length?(a.value=t.options,t.modelValue?l.value=t.options.filter(o=>o[t.valueName]==t.modelValue)[0]:l.value=""):axios.get(t.source).then(o=>{if(a.value=o.data.data,n.value=o.data.links.next,t.append){let d=!1;a.value.forEach(V=>{V[t.valueName]==t.append[t.valueName]&&(d=!0)}),d||a.value.push(t.append)}t.modelValue?l.value=a.value.filter(d=>d[t.valueName]==t.modelValue)[0]:l.value=o.data.data[0]}).catch(o=>console.log(o))});const r=b(!1),l=b(null),p=s,m=o=>{l.value=o,p("update:modelValue",l.value[t.valueName]),p("selected"),t.options.length&&(i.value="",a.value=t.options),r.value=!1},i=b(""),u=()=>{t.options.length?a.value=t.options.filter(o=>o.name.toUpperCase().includes(i.value.toUpperCase())):axios.get(t.source,{params:{search:i.value}}).then(o=>{a.value=o.data.data,n.value=o.data.links.next}).catch(o=>console.log(o.response))},v=b(!1),E=()=>{if(v.value=!0,t.options.length){v.value=!1;return}if(n.value==null){v.value=!1;return}axios.get(n.value).then(o=>{a.value=a.value.concat(o.data.data),v.value=!1,n.value=o.data.links.next}).catch(o=>console.log(o.response))},x=b(null),k=b(null),{floatingStyles:T,middlewareData:C}=Z(x,k,{whileElementsMounted:ee,middleware:[te(),ae({apply({rects:o,elements:d}){Object.assign(d.floating.style,{minWidth:`${o.reference.width}px`})},padding:5}),le()]});return(o,d)=>{var I;const V=he,z=R;return h(),y("div",null,[f("div",ye,[f("button",{ref_key:"reference",ref:x,type:"button",onClick:d[0]||(d[0]=g=>r.value=!r.value),class:w(["relative w-full pl-3 pr-10 text-left border border-gray-300 rounded-full shadow-sm cursor-pointer focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary sm:text-sm",[`bg-${e.bgColor} text-${e.txtColor}`,l.value!=""?"py-2":"py-5"]]),"aria-haspopup":"listbox","aria-expanded":"true","aria-labelledby":"listbox-label"},[l.value?(h(),y("span",xe,[e.imageName?(h(),y("img",{key:0,src:l.value[e.imageName],alt:"",class:"flex-shrink-0 w-6 h-6 rounded"},null,8,Ne)):N("",!0),f("span",we,U(l.value[e.textName]),1)])):N("",!0),f("span",ke,[O(S(re),{class:"w-3 text-gray-400 rotate-90"})])],2),r.value?(h(),K(Q,{key:0,to:"body"},[f("div",{ref_key:"floating",ref:k,style:W({...S(T),visibility:(I=S(C).hide)!=null&&I.referenceHidden?"hidden":"visible"}),class:w(["z-50 py-1 mt-1 overflow-auto text-base rounded-lg shadow-lg max-h-56 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",`bg-${e.bgColor}`])},[O(G,{"enter-active-class":"transition duration-100 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:J(()=>[r.value?F((h(),y("ul",Se,[f("li",null,[f("div",Ee,[F(f("input",{type:"search","onUpdate:modelValue":d[1]||(d[1]=g=>i.value=g),class:"block w-full px-4 border-gray-300 rounded shadow-sm focus:border-primary focus:ring-primary sm:text-sm disabled:bg-gray-100",onInput:u,placeholder:"Search"},null,544),[[X,i.value]])])]),a.value.length?(h(!0),y(Y,{key:0},_(a.value,g=>(h(),y("li",{onClick:Oe=>m(g),class:w(["relative py-2 pl-3 cursor-pointer select-none pr-9 hover:bg-primary hover:text-white",`text-${e.txtColor}`]),id:"listbox-option-0",role:"option"},[f("div",Ce,[e.imageName?(h(),y("img",{key:0,src:g[e.imageName],alt:"",class:"flex-shrink-0 w-6 h-6 rounded"},null,8,Ve)):N("",!0),f("span",{class:w(["block font-normal truncate mis-3",{"font-semibold":g[e.valueName]==l.value[e.valueName],"font-normal":g[e.valueName]!=l.value[e.valueName]}])},U(g[e.textName]),3)]),f("span",{class:w(["absolute inset-y-0 flex items-center rtl:left-0 ltr:right-0 pie-4",{"text-primary":g[e.valueName]==l.value[e.valueName],[`text-${e.bgColor}`]:g[e.valueName]!=l.value[e.valueName]}])},[O(S(ce),{class:"w-5 h-5"})],2)],10,Te))),256)):N("",!0)])),[[V,E],[z,v.value]]):N("",!0)]),_:1})],6)])):N("",!0)])])}}};export{Re as _};
