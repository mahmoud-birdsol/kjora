import{o as m,d as g,a as e,r as n,T as Te,m as Se,Q as V,c as q,w as p,t as c,F as U,g as N,b as s,u as j,s as F,f as J,j as P,y as Q,h as X,a3 as Z,I as Y,n as A,e as I,B as re,M as ie,k as H,q as R,v as E,C as ue}from"./app.8ff0f107.js";import{_ as Le}from"./AppLayout.ac3aab9c.js";import{_ as ee}from"./Avatar.vue_vue_type_style_index_0_lang.13aa623b.js";import{d as de}from"./dayjs.min.61a7718e.js";import{r as me,_ as K}from"./DateTranslation.68228c64.js";import{r as ce,E as fe,a as pe}from"./EmojiPickerElement.366cc66a.js";import{_ as ve}from"./ConfirmationModal.2d697eda.js";import{_ as Me}from"./Modal.b3ff11aa.js";import{r as he}from"./TrashIcon.e2d94f9f.js";import{_ as je,a as Be,b as Ie}from"./PostCaptionForm.e877813e.js";import{F as Oe}from"./ResponsiveNavLink.118cd62e.js";import{_ as Ae,r as Pe}from"./ReportModal.78ea62a4.js";import{_ as Ue}from"./Socials.aef126b5.js";import{r as ze}from"./PencilIcon.39df674d.js";import{r as Re}from"./StarIcon.5dbdfceb.js";import"./MapPinIcon.afa94ea1.js";import"./SecondaryButton.5221202e.js";import"./XMarkIcon.4621726c.js";import"./InvitationPlayerCard.1c9614ad.js";import"./index.1938c188.js";import"./CheckIcon.7c9aeea7.js";/* empty css                                                  *//* empty css                                                                           */import"./vue-splide.esm.8f184fc8.js";import"./PrimaryButton.11a51cad.js";import"./index.f405b57e.js";import"./radio-group.451bf289.js";function Ee(t,B){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})])}function De(t,B){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"})])}const Ve=["disabled"],xe={__name:"LikeButton",props:{likeable_id:{required:!0,type:Number},likeable_type:{required:!0,type:String},isLiked:{required:!0,type:Boolean,default:!1},canLiked:{required:!0,type:Boolean,default:!0}},emits:["like","disLike"],setup(t,{emit:B}){const w=t,i=B,l=n(w.isLiked),u=n(!1),a=Te({likeable_id:w.likeable_id,likeable_type:w.likeable_type});function k(){u.value||!canLiked.value||(l.value?a.delete(route("like.destroy"),{preserveState:!0,preserveScroll:!0,onStart:()=>{l.value=!1,u.value=!0},onSuccess:()=>{i("disLike"),u.value=!1}}):a.post(route("like.store"),{preserveState:!0,preserveScroll:!0,onStart:()=>{l.value=!0,u.value=!0},onSuccess:()=>{i("like"),u.value=!1}}))}return(o,f)=>(m(),g("button",{onClick:k,disabled:u.value,class:"p-1"},[Se(o.$slots,"default",{isLiked:l.value})],8,Ve))}},qe={class:"flex justify-center shadow-sm"},Fe={class:"flex gap-1 text-lg font-bold text-primary"},He={class:"capitalize transition-all duration-150"},Ke={class:"min-h-[400px] max-h-[500px] p-4 pt-0 overflow-y-auto hideScrollBar"},Ne={class:"flex flex-col"},We={class:"m-0 font-bold leading-none capitalize"},G={__name:"LikesModal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"xs"},closeable:{type:Boolean,default:!0},users:{require:!0,type:null}},emits:["close","delete"],setup(t,{emit:B}){const w=B,i=()=>{w("close")};return V().props.auth.user,(l,u)=>(m(),q(Me,{show:t.show,"max-width":"xs",closeable:t.closeable,onClose:i,showCloseIcon:!0},{default:p(()=>{var a,k;return[e("div",qe,[e("h2",Fe,[e("span",null,c((a=t.users)==null?void 0:a.length),1),e("span",He,c(((k=t.users)==null?void 0:k.length)<=1?l.$t("like"):l.$t("likes")),1)])]),e("div",Ke,[(m(!0),g(U,null,N(t.users,o=>(m(),g("div",{key:o.id,class:"flex items-center w-full gap-2 p-2 text-stone-800"},[e("div",null,[s(ee,{id:o.id,username:o.name,"image-url":o.avatar_url,size:"md",border:!0,"border-color":"primary"},null,8,["id","username","image-url"])]),e("div",Ne,[s(j(F),{href:l.route("player.profile",o.id),class:"flex flex-row gap-2"},{default:p(()=>[e("h3",We,c(o.name),1)]),_:2},1032,["href"]),s(j(F),{href:l.route("player.profile",o.id),class:"text-xs text-stone-400"},{default:p(()=>[J("@"+c(o.username),1)]),_:2},1032,["href"])])]))),128))])]}),_:1},8,["show","closeable"]))}},Ze={class:"relative flex items-center flex-grow"},Ye=["innerHTML"],Qe=["onKeypress","onKeydown","value"],Ge={key:0,class:"absolute flex flex-col text-center bg-white border divide-y rounded bottom-full w-full max-h-[10vh] overflow-auto hideScrollBar"},Je=["onClick"],ge={__name:"MentionTextArea",props:{newText:String,ref:String},emits:["addText","update:newText"],setup(t,{emit:B}){const w=t,i=B,l=n(!1),u=n(),a=n([]),k=n(""),o=n(null),f=n(0),L=P(()=>{let h=a.value.filter(b=>b.username.toLowerCase().includes(k.value.toLowerCase())),S=w.newText.match(/@\w+/g);return h.filter(b=>!S.includes(`@${b.username}`))}),$=P(()=>{if(!w.newText.match(/@\w+/g))return w.newText;let h=w.newText.split(" "),S=[];return S=h.map(b=>M(b)?`<span class="text-primary" dir="ltr">@${b.slice(1)}</span>`:b),S.join(" ")});function v(h){let S=w.newText.split(" ");S.splice(-1,1),i("update:newText",`${S.join(" ")} @${h.username} `),l.value=!1}function C(h){!u||(u.value.scrollTop=h.target.scrollTop)}function _(h){!l.value||(h.preventDefault(),console.log(f.value,o.value.length),f.value<=0?f.value=o.value.length-1:f.value-=1,console.log(f.value,L.value.length))}function r(h){!l.value||(h.preventDefault(),f.value>=L.value.length-1?f.value=0:f.value+=1)}function y(h){if(!l.value)return i("addText");v(L.value[f.value])}function M(h){return a.value.some(S=>S.username===h.slice(1))}async function z(){await re.get(route("api.user.get.users.name")).then(h=>{a.value=h.data.data})}return Q(()=>w.newText,(h,S)=>{let b=h.split(" ").slice(-1).join();b.match(/@\w+/g)?(k.value=b.substring(1),l.value=!0):l.value=!1}),Q(f,()=>{o.value[f.value].scrollIntoView()}),X(()=>z()),(h,S)=>(m(),g("div",Ze,[e("div",{ref_key:"customTextArea",ref:u,class:"w-full p-2 px-4 border-none rounded-full resize-none hideScrollBar break-all whitespace-pre-wrap placeholder:text-neutral-400 bg-stone-100 text-stone-700 focus:ring-1 focus:ring-primary min-h-[2.5rem] overflow-auto max-h-[3.75rem]"},[e("span",{innerHTML:$.value},null,8,Ye)],512),e("textarea",{onKeypress:Z(Y(y,["exact","prevent"]),["enter"]),onKeydown:[Z(Y(_,["exact"]),["up"]),Z(Y(r,["exact"]),["down"])],onScroll:C,value:t.newText,onInput:S[0]||(S[0]=b=>h.$emit("update:newText",b.target.value)),placeholder:"Please write text ...",class:"w-full p-2 px-4 border-none rounded-full resize-none hideScrollBar break-all whitespace-pre-wrap placeholder:text-neutral-400 bg-transparent focus:ring-1 focus:ring-primary absolute text-transparent caret-black inset-y-0 max-h-[3.75rem] min-h-[2.5rem]"},"		",40,Qe),l.value&&L.value.length?(m(),g("ul",Ge,[(m(!0),g(U,null,N(L.value,(b,W)=>(m(),g("li",{class:A(["p-1 text-sm transition-colors duration-300 cursor-pointer text-primary hover:bg-stone-300",f.value===W&&"bg-primary text-white"]),onClick:te=>v(b),ref_for:!0,ref_key:"options",ref:o},c(b.username),11,Je))),256))])):I("",!0)]))}},Xe=["data-comment-id"],et={class:"flex flex-col justify-between w-full xs:flex-row"},tt={class:"flex flex-row gap-1 md:flex-col"},st={class:"flex flex-row gap-2"},lt={class:"m-0 text-sm font-bold leading-none capitalize sm:text-lg text-stone-800"},ot={class:"flex flex-row gap-2 text-[8px] ltr:origin-right rtl:origin-left text-neutral-400/90"},nt={class:"w-full"},at=["innerHTML"],rt={class:"flex items-center justify-start w-full gap-2 mb-2 text-sm font-semibold text-stone-700"},it={class:"flex items-center"},ut={class:"text-sm"},dt={class:"text-sm"},mt={class:"transition-all duration-150"},ct={class:"mt-2"},ft={class:"flex flex-row items-center self-end w-full p-3 gap-x-3"},pt={class:"relative flex items-center"},vt=["disabled"],ht={__name:"Comment",props:["comment","parentOffset","users"],emits:["addedReply"],setup(t,{expose:B,emit:w}){const i=t;ie(()=>{de.extend(me)});const l=w,u=V().props.auth.user;n(null);const a=n(!1),k=P(()=>i.comment.replies&&i.comment.replies.length>0),o=n(""),f=n(!1),L=n(!1),$=n(!1),v=n(""),C=n(!1),_=n(i.comment.likes_count),r=n(!1),y=n(null),M=u.id===i.comment.user.id,z=V().url.includes("public/posts");i.comment.parent_id,X(()=>{var d;let x=(d=route().params)==null?void 0:d.commentId;i.comment.id===+x&&(y.value.scrollIntoView({behavior:"smooth",block:"center"}),y.value.classList.add("first-appear"))}),B({showReplies:a}),Q(()=>i.comment.replies.length,(x,d)=>{a.value=!0});const h=P(()=>k.value?"before:absolute  ltr:before:-left-9 rtl:before:-right-9   before:w-px   before:bg-stone-200  before:z-[1] before:top-0 before:bottom-[8px]   ":" "),S=P(()=>k.value?a.value?" after:absolute after:h-px after:w-8  after:bg-stone-200   ltr:after:-left-9 rtl:after:-right-9 after:bottom-[8px]":" after:absolute after:h-px after:w-8  after:bg-stone-200   ltr:after:-left-9 rtl:after:-right-9 after:bottom-[8px] ":""),b=P(()=>i.comment.parent_id?" after:absolute after:h-px after:w-8  after:bg-stone-200  after:z-[-1] ltr:after:-left-9 rtl:after:-right-9 after:top-5 ":""),W=P(()=>{const x=i.comment.body;return x.includes("@")?x.split(" ").map(O=>O.startsWith("@")?i.users.some(D=>D.username===O.slice(1))?`<a href="/player/name/${O.slice(1)}" class="text-primary" dir="ltr">${O}</a>`:`${O}`:O).join(" "):i.comment.body});function te(){a.value=!a.value}function se(){!o.value||o.value.trim()===""||(L.value=!0,we(),f.value=!1,l("addedReply"))}function we(){axios.post(route("api.gallery.comments.store"),{commentable_id:i.comment.commentable_id,commentable_type:i.comment.commentable_type,body:o.value,user_id:u.id,parent_id:i.comment.id}).then(x=>{o.value="",L.value=!1}).catch(x=>console.error(x))}function be(){C.value=!1,ue.delete(route("comments.destroy",i.comment),{preserveScroll:!0,preserveState:!1})}function ke(x){f.value=!0,setTimeout(()=>{},0)}function ye(){l("addedReply")}function $e(x){o.value+=x,f.value=!0}function Ce(x){(f.value=!0)&&(!o.value||o.value==="")&&(f.value=!1)}function _e(x){let d=i.parentOffset,O=x.target.getBoundingClientRect().top+window.scrollY,D=320;O-d>D?v.value="bottom-full":v.value="top-full",$.value=!$.value}return(x,d)=>{var le,oe,ne,ae;const O=H("Comment",!0),D=H("OnClickOutside");return m(),g("div",{ref_key:"commentsComp",ref:y,"data-comment-id":t.comment.id,class:A(["grid grid-cols-[min-content_1fr] w-full justify-start gap-4 px-6 pt-2",t.comment.parent_id?"bg-white":""])},[e("div",{class:A(["min-w-max z-[10] relative",b.value])},[s(ee,{id:t.comment.user.id,username:t.comment.user.name,"image-url":t.comment.user.avatar_url,size:"md",border:!0,"border-color":"primary"},null,8,["id","username","image-url"])],2),e("div",{class:A(["relative flex flex-col max-w-full gap-1",[h.value,S.value]])},[e("div",et,[e("div",tt,[e("div",st,[e("h3",lt,c(t.comment.user.name),1),I("",!0)]),s(j(F),{class:"text-xs text-stone-400",href:x.route("player.profile",t.comment.user.id)},{default:p(()=>[J("@"+c(t.comment.user.username),1)]),_:1},8,["href"])]),e("div",ot,[e("span",null,[s(K,{type:"range",start:t.comment.created_at},null,8,["start"])]),d[10]||(d[10]=e("span",null,"|",-1)),s(K,{format:"hh:mm A",start:t.comment.created_at},null,8,["start"])])]),e("div",nt,[e("p",{class:"w-full text-sm break-all whitespace-pre-wrap text-stone-800",innerHTML:W.value},null,8,at)]),e("div",rt,[j(z)?(m(),g(U,{key:1},[_.value>0?(m(),g(U,{key:0},[e("button",{onClick:d[7]||(d[7]=T=>r.value=!0)},[e("span",dt,c(_.value),1),s(G,{show:r.value,users:(ne=t.comment.likes)==null?void 0:ne.map(T=>T.user),onClose:d[6]||(d[6]=T=>r.value=!1)},null,8,["show","users"])]),e("div",mt,c(_.value<=1?x.$t("like"):x.$t("likes")),1)],64)):I("",!0)],64)):(m(),g(U,{key:0},[M?(m(),g("button",{key:0,onClick:d[1]||(d[1]=T=>C.value=!0),class:"p-1 transition-all duration-150 pis-0 enabled:hover:underline hover:underline-offset-4"},[s(j(he),{class:"w-4"}),s(ve,{show:C.value,onClose:d[0]||(d[0]=T=>C.value=!1),onDelete:be},{body:p(()=>[e("span",null,c(x.$t("Are you sure you want delete this comment ? ")),1)]),_:1},8,["show"])])):I("",!0),e("button",{onClick:ke,class:"p-1 transition-all duration-150 pis-0"},c(t.comment.replies.length>0?t.comment.replies.length:"")+" "+c(x.$t("reply")),1),e("div",it,[R(e("button",{onClick:d[3]||(d[3]=T=>r.value=!0)},[e("span",ut,c(_.value),1),s(G,{show:r.value,users:(le=t.comment.likes)==null?void 0:le.map(T=>T.user),onClose:d[2]||(d[2]=T=>r.value=!1)},null,8,["show","users"])],512),[[E,_.value>0]]),s(xe,{isLiked:(oe=t.comment)==null?void 0:oe.is_liked,likeable_id:t.comment.id,likeable_type:"App\\Models\\Comment",onLike:d[4]||(d[4]=T=>_.value++),onDisLike:d[5]||(d[5]=T=>_.value--)},{default:p(({isLiked:T})=>[e("div",{class:A(["transition-all duration-150",T?"text-primary":""])},c(_.value<=1?x.$t("like"):x.$t("likes")),3)]),_:1},8,["isLiked","likeable_id"])])],64))]),R(e("div",ct,[(m(!0),g(U,null,N(t.comment.replies,(T,Ht)=>(m(),q(O,{key:T.id,onAddedReply:ye,comment:T,users:t.users},null,8,["comment","users"]))),128))],512),[[E,a.value]]),s(D,{onTrigger:Ce},{default:p(()=>[R(e("div",ft,[s(D,{onTrigger:d[8]||(d[8]=T=>$.value=!1)},{default:p(()=>[e("div",pt,[e("button",{onClick:_e,"data-cancel-blur":!0},[s(j(ce),{class:"w-6 text-neutral-400"})]),R(e("div",{class:A(["absolute z-[1000] ltr:left-full rtl:right-full",v.value])},[s(fe,{onSelectedEmoji:$e})],2),[[E,$.value]])])]),_:1}),s(ge,{onAddText:se,newText:o.value,"onUpdate:newText":d[9]||(d[9]=T=>o.value=T)},null,8,["newText"]),e("button",{onClick:se,disabled:L.value,class:"p-1 group"},[s(j(pe),{class:A(["w-5 group-hover:text-neutral-700 rtl:rotate-180",L.value?"text-neutral-200":"text-neutral-400"])},null,8,["class"])],8,vt)],512),[[E,f.value]])]),_:1}),R(e("button",{onClick:te,class:"flex justify-start w-full gap-2 text-sm transition-all duration-300 text-stone-500 enabled:hover:underline hover:underline-offset-4"},c(a.value?x.$t("hide"):x.$t("view"))+" "+c((ae=t.comment.replies)==null?void 0:ae.length)+" "+c(x.$t("replies")),513),[[E,k.value]])],2)],10,Xe)}}},xt={class:"relative"},gt={class:"absolute top-0 z-20 px-3 py-2 text-xs text-white bg-black border ltr:right-8 rtl:left-8 rounded-xl border-neutral-500 z-2"},wt={class:"flex flex-col justify-center gap-y-2"},bt={class:"flex items-center gap-x-2"},kt={class:"flex items-center justify-center gap-x-2"},yt={class:"flex items-center justify-center"},$t={class:"hover:text-gray-400 group"},Ct={key:0},_t={class:"flex items-center gap-x-2"},Tt={key:0,class:"absolute bottom-0 p-1 -my-4 text-sm font-bold text-white bg-black rounded ltr:right-0 rtl:left-0 whitespace-nowrap"},St={__name:"PostOptionMenu",props:["isCurrentUser","postId"],emits:["editingCaption"],setup(t,{emit:B}){const w=t,i=B,l=n(!1),u=n(!1),a=n(!1);function k(){u.value=!1,l.value=!0}function o(){u.value=!1,i("editingCaption")}function f(){l.value=!1,ue.delete(route("posts.destroy",w.postId),{})}function L(){a.value=!0,u.value=!1,setTimeout(()=>{a.value=!1},2e3)}return($,v)=>{const C=H("OnClickOutside");return m(),g("div",xt,[e("button",{class:"p-1",onClick:v[0]||(v[0]=_=>u.value=!u.value)},[s(j(Ee),{class:"w-6"})]),s(C,{onTrigger:v[3]||(v[3]=_=>u.value=!1)},{default:p(()=>[s(Oe,null,{default:p(()=>[R(e("div",gt,[e("ul",wt,[t.isCurrentUser?(m(),g("button",{key:0,class:"hover:text-gray-400 group",onClick:o},[e("li",bt,[s(j(ze),{class:"w-4"}),e("span",null,c($.$t("edit")),1)])])):I("",!0),t.isCurrentUser?(m(),g("button",{key:1,onClick:k,class:"hover:text-gray-400"},[e("li",kt,[s(j(he),{class:"w-4"}),e("span",null,c($.$t("delete")),1)]),s(ve,{show:l.value,onClose:v[1]||(v[1]=_=>l.value=!1),onDelete:f},{body:p(()=>[e("span",null,c($.$t("Are you sure you want delete this post ? ")),1)]),_:1},8,["show"])])):I("",!0),e("button",{onClick:v[2]||(v[2]=(..._)=>$.showShare&&$.showShare(..._)),class:"hover:text-gray-400"},[e("li",yt,[s(Ue,{shareUrl:`public/posts/${t.postId}`,position:"-top-1",onShowCopied:L},{label:p(()=>[e("span",null,c($.$t("share")),1)]),_:1},8,["shareUrl"])])]),e("button",$t,[t.isCurrentUser?I("",!0):(m(),g("li",Ct,[s(Ae,{"reportable-id":t.postId,"reportable-type":"App\\Models\\Post"},{trigger:p(()=>[e("button",_t,[s(j(Pe),{class:"w-4"}),e("span",null,c($.$t("report")),1)])]),_:1},8,["reportable-id"])]))])])],512),[[E,u.value]])]),_:1})]),_:1}),a.value?(m(),g("span",Tt,c($.$t("copied"))+"!",1)):I("",!0)])}}},Lt={class:"relative flex items-center"},Mt={class:"absolute z-20 bottom-full ltr:left-full rtl:right-full"},jt=["disabled"],Bt={__name:"PostCommentForm",props:["postId","commentsContainer"],emits:["addComment"],setup(t,{emit:B}){const w=t,i=B,l=n(""),u=n(),a=n(!1),k=n(!1),o=V().props.auth.user;function f(){re.post(route("api.gallery.comments.store"),{commentable_id:w.postId,commentable_type:"App\\Models\\Post",body:l.value,user_id:o.id,parent_id:null}).then(v=>{i("addComment")}).catch(v=>console.error(v)).finally(()=>{a.value=!1,l.value=""})}function L(){a.value||!l.value||l.value.trim()===""||(a.value=!0,f())}function $(v){l.value+=v}return(v,C)=>{const _=H("OnClickOutside");return m(),g(U,null,[s(_,{onTrigger:C[1]||(C[1]=r=>k.value=!1)},{default:p(()=>[e("div",Lt,[e("button",{onClick:C[0]||(C[0]=r=>k.value=!k.value),"data-cancel-blur":!0},[s(j(ce),{class:"w-6 text-neutral-400"})]),R(e("div",Mt,[s(fe,{onSelectedEmoji:$})],512),[[E,k.value]])])]),_:1}),s(ge,{newText:l.value,"onUpdate:newText":C[2]||(C[2]=r=>l.value=r),onAddText:L,ref:u.value},null,8,["newText"]),e("button",{onClick:C[3]||(C[3]=r=>L()),disabled:a.value,class:"p-1 group"},[s(j(pe),{class:A(["w-5 group-hover:text-neutral-700 rtl:rotate-180",a.value?"text-neutral-200":"text-neutral-400"])},null,8,["class"])],8,jt)],64)}}},It={class:"flex justify-between w-full"},Ot={class:"flex flex-col"},At={class:"flex flex-row gap-2"},Pt={class:"m-0 text-lg font-bold leading-none capitalize"},Ut={key:0,class:"shrink-0"},zt={class:"w-4 rounded-full bg-golden aspect-square"},Rt={class:"flex justify-between w-full gap-2 text-[10px] text-stone-400"},Et={class:"flex flex-row gap-1"},Dt={class:"flex items-center justify-between p-4 pt-5 border-b border-stone-300"},Vt={class:"text-sm"},qt={class:"flex items-center gap-1"},Ft={class:"text-sm"},gs={__name:"Show",props:{user:null,post:null},setup(t){ie(()=>{de.extend(me)});const B=t,w=n(null),i=n(null),l=n(null),u=n([]),a=n(!1),k=V().props.auth.user,o=k.id===B.user.id,f=n([]),L=P(()=>{var r;return u.value?(r=u.value.filter(y=>!y.parent_id))==null?void 0:r.length:0}),$=P(()=>{var r;return((r=w.value)==null?void 0:r.getBoundingClientRect().top)+window.scrollY});X(()=>{v(),_()});function v(){axios.get(route("api.gallery.comments"),{params:{commentable_id:B.post.id,commentable_type:"App\\Models\\Post"}}).then(r=>{var y;u.value=r.data.data,(y=route().params)!=null&&y.commentId||C()}).catch(r=>console.error(r))}function C(){setTimeout(()=>{w.value.scrollTo({top:w.value.scrollHeight,left:0,behavior:"smooth"})},100)}async function _(){f.value=await axios.get(route("api.user.get.users.name")).then(r=>r.data.data)}return(r,y)=>(m(),q(Le,{title:"gallery",showBall:!1},{header:p(()=>[e("p",null,c(r.$t("post")),1)]),default:p(()=>[s(Ie,null,{media:p(()=>[s(je,{postMedia:t.post.media,user:t.user},null,8,["postMedia","user"])]),userImage:p(()=>[s(ee,{id:t.user.id,username:t.user.name,"image-url":t.user.avatar_url,size:"md",border:!0,"border-color":"primary"},null,8,["id","username","image-url"])]),userInfo:p(()=>{var M;return[e("div",It,[e("div",Ot,[e("div",At,[e("h3",Pt,c(t.user.name),1),((M=j(k))==null?void 0:M.state_name)==="Premium"?(m(),g("div",Ut,[e("div",zt,[s(j(Re),{class:"fill-white stroke-none"})])])):I("",!0)]),s(j(F),{href:r.route("player.profile",t.user.id),class:"text-xs text-stone-400"},{default:p(()=>[J("@"+c(t.user.username),1)]),_:1},8,["href"])]),s(St,{isCurrentUser:o,postId:t.post.id,onEditingCaption:y[0]||(y[0]=z=>l.value?l.value.isEditingCaption=!0:null)},null,8,["postId"])])]}),"postDate&Time":p(()=>[e("div",Rt,[e("div",Et,[s(K,{start:t.post.created_at,type:"range"},null,8,["start"]),y[4]||(y[4]=e("span",null,"|",-1)),s(K,{start:t.post.created_at,format:"hh:mm A"},null,8,["start"])])])]),postCaption:p(()=>[s(Be,{ref_key:"postCaptionComp",ref:l,post:t.post},null,8,["post"])]),commentsCount:p(()=>{var M,z,h,S;return[e("div",Dt,[e("div",Vt,c(r.$t("comments ( :count )",{count:L.value})),1),e("div",qt,[((M=t.post)==null?void 0:M.likes_count)>0?(m(),g("button",{key:0,onClick:y[2]||(y[2]=b=>a.value=!0)},[e("span",Ft,c((z=t.post)==null?void 0:z.likes_count),1),s(G,{show:a.value,users:(h=t.post.likes)==null?void 0:h.map(b=>b.user),onClose:y[1]||(y[1]=b=>a.value=!1)},null,8,["show","users"])])):I("",!0),s(xe,{canLiked:o,isLiked:(S=t.post)==null?void 0:S.is_liked,likeable_id:t.post.id,likeable_type:"App\\Models\\Post"},{default:p(({isLiked:b})=>[s(j(De),{class:A(["w-4 stroke-current stroke-2 text-primary",b?"fill-current":"fill-transparent"])},null,8,["class"])]),_:1},8,["isLiked","likeable_id"])])])]}),postComments:p(()=>[u.value?(m(),g("div",{key:0,ref_key:"commentsContainer",ref:w,onScroll:y[3]||(y[3]=(...M)=>r.handleScroll&&r.handleScroll(...M)),class:"flex flex-col gap-4 w-full max-h-[500px] hideScrollBar overflow-auto"},[(m(!0),g(U,null,N(u.value.filter(M=>!M.parent_id),M=>(m(),q(ht,{key:M.id,onAddedReply:v,comment:M,users:f.value,ref_for:!0,ref_key:"commentsComps",ref:i,parentOffset:$.value,id:M.id},null,8,["comment","users","parentOffset","id"]))),128))],544)):I("",!0)]),newCommentForm:p(()=>[s(Bt,{postId:t.post.id,commentsContainer:w.value,onAddComment:v},null,8,["postId","commentsContainer"])]),_:1})]),_:1}))}};export{gs as default};
